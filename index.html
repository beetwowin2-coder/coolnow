<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cool Now Store - Fresh & Cool Anywhere</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Kanit', sans-serif; overflow-x: hidden; }
        #cartDrawer { transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1); }
        .drawer-open { transform: translateX(0); }
        .drawer-closed { transform: translateX(100%); }
        .modal-active { overflow: hidden; }
        .spinner { border: 2px solid rgba(236, 72, 153, 0.1); border-radius: 50%; border-top: 2px solid #ec4899; width: 18px; height: 18px; animation: spin 0.8s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .active-push:active { transform: scale(0.95); }
        .hero-bg { background: radial-gradient(circle at top right, #fff5f8, #ffffff); }
        #cartItemsList::-webkit-scrollbar { width: 4px; }
        #cartItemsList::-webkit-scrollbar-thumb { background: #fbcfe8; border-radius: 10px; }
        .history-item { border-left: 4px solid #ec4899; }
    </style>
</head>

<body class="bg-[#FBFBFD] text-gray-800">

<!-- ================= NAVBAR ================= -->
<nav class="bg-white/80 backdrop-blur-md py-3 px-4 flex justify-between sticky top-0 z-50 shadow-sm">
    <div class="flex items-center gap-6">
        <a href="index.html" class="font-bold text-xl">COOL<span class="text-pink-500">NOW</span></a>
        <input id="indexSearchInput" class="hidden md:block bg-gray-100 rounded-full px-10 py-2 text-sm" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏Å‡∏•‡∏¥‡πà‡∏ô‡∏ó‡∏µ‡πà‡∏ä‡∏≠‡∏ö...">
    </div>

    <div class="flex items-center gap-4 text-sm">
        <button onclick="openHistoryModal()">üìú ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥</button>
        <a href="products.html">‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</a>
        <div id="authSection"><div class="spinner"></div></div>
        <div onclick="toggleCart(true)" class="relative cursor-pointer">
            üõí
            <span id="cart-count" class="absolute -top-2 -right-2 bg-pink-500 text-white text-xs px-1 rounded-full">0</span>
        </div>
    </div>
</nav>

<!-- ================= HERO ================= -->
<section class="hero-bg container mx-auto mt-6 px-4">
    <div class="bg-white rounded-3xl flex flex-col md:flex-row overflow-hidden">
        <div class="p-10 md:w-1/2">
            <h1 class="text-5xl font-bold">‡∏™‡∏î‡∏ä‡∏∑‡πà‡∏ô<br><span class="text-pink-500">‡∏à‡∏≤‡∏Å‡∏ò‡∏£‡∏£‡∏°‡∏ä‡∏≤‡∏ï‡∏¥</span></h1>
            <p class="mt-4 text-pink-600 font-bold">‡∏ã‡∏∑‡πâ‡∏≠ 2 ‡∏ä‡∏¥‡πâ‡∏ô ‡∏™‡πà‡∏á‡∏ü‡∏£‡∏µ üöö</p>
            <button onclick="location.href='products.html'" class="mt-6 bg-pink-500 text-white px-8 py-4 rounded-xl">‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ä‡πâ‡∏≠‡∏õ üõçÔ∏è</button>
        </div>
        <div class="md:w-1/2 bg-pink-50 flex justify-center items-center">
            <img src="images/B2.png" class="max-h-[400px]">
        </div>
    </div>
</section>

<!-- ================= CART DRAWER ================= -->
<div id="cartDrawerOverlay" class="fixed inset-0 bg-black/40 hidden" onclick="toggleCart(false)"></div>
<div id="cartDrawer" class="fixed right-0 top-0 h-full w-full sm:w-[380px] bg-white shadow-xl drawer-closed">
    <div class="p-6 flex justify-between">
        <h2 class="font-bold text-xl">üõí ‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤</h2>
        <button onclick="toggleCart(false)">‚úï</button>
    </div>
    <div id="cartItemsList" class="p-4 flex-1 overflow-y-auto"></div>
    <div class="p-6 border-t">
        <div id="cartSummary"></div>
        <button onclick="proceedToCheckout()" class="w-full mt-4 bg-pink-500 text-white py-4 rounded-xl">
            ‡πÑ‡∏õ‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô ‚Üí
        </button>
    </div>
</div>

<!-- ================= FIREBASE ================= -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

const firebaseConfig = {
    apiKey: "AIzaSyCQGbSSIqRjLblQsY565li1YxXGFQrHxYc",
    authDomain: "coolnow-1d8f4.firebaseapp.com",
    projectId: "coolnow-1d8f4",
    storageBucket: "coolnow-1d8f4.appspot.com",
    messagingSenderId: "857055916856",
    appId: "1:857055916856:web:c32673482de318e04a07cd"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
window.currentUser = null;

onAuthStateChanged(auth, (user) => {
    const authSection = document.getElementById("authSection");
    window.currentUser = user;

    if (user) {
        authSection.innerHTML = `
            <button onclick="logout()" class="text-xs bg-gray-800 text-white px-4 py-2 rounded-full">
                Logout
            </button>`;
    } else {
        authSection.innerHTML = `
            <a href="auth.html" class="bg-gray-800 text-white px-4 py-2 rounded-full text-xs">
                Login
            </a>`;
    }
});

window.logout = async () => {
    await signOut(auth);
    location.reload();
};
</script>

<!-- ================= CART SCRIPT ================= -->
<script>
let cart = JSON.parse(localStorage.getItem('coolNowCart')) || [];

function toggleCart(open) {
    document.getElementById('cartDrawer').className =
        open ? 'drawer-open fixed right-0 top-0 h-full bg-white' : 'drawer-closed fixed right-0 top-0 h-full bg-white';
    document.getElementById('cartDrawerOverlay').classList.toggle('hidden', !open);
    updateCartUI();
}

function updateCartUI() {
    const list = document.getElementById('cartItemsList');
    const count = document.getElementById('cart-count');
    list.innerHTML = cart.length ? cart.map(i => `<p>${i.name} x${i.qty}</p>`).join('') : '‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡∏ß‡πà‡∏≤‡∏á ü´†';
    count.innerText = cart.reduce((s,i)=>s+i.qty,0);
}
</script>

<script src="footer.js"></script>
</body>
</html>
